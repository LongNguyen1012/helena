<html>

<head>
	<script type="text/javascript" src="../scripts/lib/jquery.js"></script>
	<script type="text/javascript" src="../scripts/lib/jquery_csv.js"></script>
	<script type="text/javascript" src="../scripts/lib/jquery-ui.js"></script>
	<script type="text/javascript" src="../scripts/lib/misc-utilities.js"></script>
	<script type="text/javascript" src="../scripts/lib/stableStringify.js"></script>
	<script type="text/javascript" src="../scripts/lib/underscore-min.js"></script>
	<script type="text/javascript" src="../scripts/lib/json2.js"></script>
	<script type="text/javascript" src="../scripts/lib/JSOG.js"></script>
	<script type="text/javascript" src="../scripts/lib/FileSaver.js"></script>
	<script type="text/javascript" src="../scripts/lib/Blob.js"></script>
	<script type="text/javascript" src="../scripts/lib/jquery-dateFormat.min.js"></script>
	<script type="text/javascript" src="../scripts/lib/record-replay/common_common.js"></script>
	<script type="text/javascript" src="../scripts/lib/record-replay/common_params.js"></script>
	<script type="text/javascript" src="../scripts/lib/record-replay/common_logging.js"></script>
	<script type="text/javascript" src="../scripts/lib/record-replay/mainpanel_port.js"></script>
	<script type="text/javascript" src="../scripts/lib/record-replay/mainpanel_url.js"></script>
	<script type="text/javascript" src="../scripts/lib/record-replay/mainpanel_main.js"></script>
	<script type="text/javascript" src="../scripts/lib/record-replay/mainpanel_simple_record.js"></script>
	<script type="text/javascript" src="../scripts/lib/record-replay/mainpanel_trace_parameterization.js"></script>
	<script type="text/javascript" src="../scripts/lib/record-replay/mainpanel_trace_manipulation_utilities.js"></script>
	<script type="text/javascript" src="../scripts/background/output_handling.js"></script>
	<script type="text/javascript" src="../scripts/background/errors.js"></script>
	<script type="text/javascript" src="../scripts/background/environment.js"></script>

	<script src="../scripts/lib/blockly/blockly_compressed.js"></script>
	<script src="../scripts/lib/blockly/blocks_compressed.js"></script>
	<script src="../scripts/lib/blockly/msg/js/en.js"></script>
	<script type="text/javascript" src="../scripts/background/blockly_custom_blocks.js"></script>
	
	<script type="text/javascript" src="../scripts/background/mainpanel_script.js"></script>
	
	<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" type="text/css" href="../style/style.css" />
	<link rel="stylesheet" type="text/css" href="../style/jquery-ui-1.11.0.custom/jquery-ui.min.css" />
	<link rel="stylesheet" type="text/css" href="../style/jquery-ui-1.11.0.custom/jquery-ui.structure.min.css" />
	<link rel="stylesheet" type="text/css" href="../style/jquery-ui-1.11.0.custom/jquery-ui.theme.min.css" />

	
</head>
<body>
	<div id="tabs">
		
		<ul>
			<li><a href="#tabs-1" id="new_script">New Script</a></li>
			<li><a href="#tabs-2" id="saved_scripts">Saved Scripts</a></li>
		</ul>

		<div id="tabs-1">
		<div id="new_script_content">
		</div>
		</div>

		<div id="new_script_content_panes" style="display: none">
			<div id="about_to_record" class="new_script_message_stage">
				<div id="welcome">
					Hi!  We're going to ask you to record how to scrape the first row of your dataset.  When you're ready to start recording, hit the "Start Recording" button below.
				</div>
				<div id="start_recording">
					<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" class="recording_circle">
						<circle cx="30" cy="30" r="30"/>
					</svg>
					<div class="nav">Start Recording</div>
				</div>
			</div>


			<div id="recording" class="new_script_message_stage">
				<div id="scraping_instructions">
					Awesome.  We're recording.  When you're ready to add a new cell to the first row of your dataset, just hover over the text you want to add, then press "___SCRAPINGCONDITIONSTRING___".  We'll show the data you've collected right here:
				</div>
				<div id="scraped_items_preview"></div>
				<div id="stop_recording">
					<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" class="recording_circle">
						<circle cx="30" cy="30" r="30"/>
						<rect x="15" y="15" rx="5" ry="5" width="30" height="30" fill="#f6f6f6" />
					</svg>
					<div class="nav">Stop Recording</div>
				</div>
			</div>


			<div id="script_preview" class="new_script_message_stage">
				<div id="program_representation"></div>
				
				<div id="blockly_div"></div>
				<xml id="toolbox" style="display: none">
				  
				</xml>

				<div id="relations_container">
					<div class="title">Relevant Tables</div>
					<div id="status_message"></div>
					<div id="relations"></div>
					<button id="relation_upload" class="top_margin">Upload an Additional Table</button>
				</div>
				<button id="run">Run Script</button> 
				<button id="replay">Replay Original Recorded Script</button> (for testing)
				<div>
					<input type="text" id="program_name" value="program_name">
					<button id="save">Save Script</button>
				</div>
			</div>

			<div id="script_running" class="new_script_message_stage">
				<div>
					<button id="pause">Pause Script</button> 
					<button id="resume">Resume Script</button>
					<button id="cancelRun">Cancel Script Run</button>
				</div>
				<div>
					<button id="download">Download Data</button> 
					Note that the downloaded dataset may be slightly out of date if we haven't saved all the data yet.
					<div>Rows so far: <span id=rows_so_far>0</span></div>
				</div>
				<div id="output_preview"><table><tbody></tbody></table></div>
			</div>

			<div id="relation_editing" class="new_script_message_stage">
				<div id="instructions">
					Ok, we've opened the first page in your browser and highlighted the table elements that we currently extract.  To remove highlighted cells from the table, click on them.  To add unhighlighted cells to the table, first select the appropriate color below, then click on them.  As the table changes, we'll show the first page of table data below.  When you're happy with the table, just press "I'm ready!" button.
				</div>

				<br>
				<div>Additional items in this table are found with:</div>
				<div id="next_type">
		      <input type="radio" id="next_type_1" class="next_type" name="next_type_b" value="1">
		      <label for="next_type_1">No More Items</label>
		      <input type="radio" id="next_type_2" class="next_type" name="next_type_b" value="2">
		      <label for="next_type_2">Next Button</label>
		      <input type="radio" id="next_type_3" class="next_type" name="next_type_b" value="3">
		      <label for="next_type_3">More Button</label>
		      <input type="radio" id="next_type_4" class="next_type" name="next_type_b" value="4">
		      <label for="next_type_4">Scroll for More</label>
		    </div>
		    <div id="next_type_explanation"></div>
				<br>
				<div id="color_selector"></div>
				<br>

				<button id="relation_editing_ready">I'm done!</button>
				<div id="output_preview"><table></table></div>
			</div>

			<div id="upload_relation">
				<input type="file" id="upload_data"/>				
				<button id="upload_done">Done</button> 
				<button id="upload_cancel">Cancel</button>
				<output id="upload_file_name"></output>
				<div id="upload_data_table">	</div>
			</div>


			<div id="dialog" title="Basic dialog">
		  	<p>This is where we put many dialog messages.  Text and title must be set with js.</p>
			</div>

		</div>

		<div id="tabs-2">
			<div id="saved_script_list"></div>
		</div>

	</div>

</body>
</html>
